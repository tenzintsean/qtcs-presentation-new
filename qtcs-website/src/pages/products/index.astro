---
import PageLayout from '../../layouts/PageLayout.astro';
const base = import.meta.env.BASE_URL;

const vehicles = [
  {
    id: 'l3-closed-body',
    name: 'L3 Closed Body',
    category: 'L3',
    description: 'Perfect for urban cargo delivery with weather protection',
    range: '120 km',
    payload: '350 kg',
    image: '/vehicles/l3-closed-body.jpg',
  },
  {
    id: 'l3-open-body',
    name: 'L3 Open Body',
    category: 'L3',
    description: 'Versatile open cargo platform for diverse loads',
    range: '130 km',
    payload: '400 kg',
    image: '/vehicles/l3-open-body.jpg',
  },
  {
    id: 'l3-passenger',
    name: 'L3 Passenger',
    category: 'L3',
    description: 'Comfortable passenger transport for urban mobility',
    range: '100 km',
    capacity: '3+1',
    image: '/vehicles/l3-passenger.jpg',
  },
  {
    id: 'l5-closed-body',
    name: 'L5 Closed Body',
    category: 'L5',
    description: 'Heavy-duty cargo with full weather protection',
    range: '150 km',
    payload: '600 kg',
    image: '/vehicles/l5-closed-body.jpg',
  },
  {
    id: 'l5-open-body',
    name: 'L5 Open Body',
    category: 'L5',
    description: 'Maximum payload capacity for bulk transport',
    range: '140 km',
    payload: '700 kg',
    image: '/vehicles/l5-open-body.jpg',
  },
  {
    id: 'l5-passenger-premium',
    name: 'L5 Passenger Premium',
    category: 'L5',
    description: 'Premium comfort for passenger transportation',
    range: '120 km',
    capacity: '4+1',
    image: '/vehicles/l5-passenger-premium.jpg',
  },
  {
    id: 'e-bus',
    name: 'Future E-Bus',
    category: 'E-Bus',
    description: 'Next-generation electric bus for mass transit',
    range: '200 km',
    capacity: '25+',
    image: '/vehicles/e-bus.jpg',
  },
];

const categories = ['All', 'L3', 'L5', 'E-Bus'];
---

<PageLayout title="QTCS Electric Vehicles - Product Range" currentPage={`${base}products`}>
  <section class="py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-12 md:mb-16">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-text-primary mb-6">
          Our <span class="text-accent-orange">Vehicles</span>
        </h1>
        <p class="text-lg md:text-xl text-text-secondary max-w-3xl mx-auto">
          Explore our range of electric vehicles designed for India's diverse
          transportation needs - from cargo delivery to passenger mobility.
        </p>
      </div>

      <!-- Category Filter -->
      <div class="flex flex-wrap justify-center gap-3 mb-12">
        {categories.map((category, index) => (
          <button
            class:list={[
              'px-6 py-2 rounded-full font-medium transition-all duration-200',
              index === 0
                ? 'bg-accent-orange text-white'
                : 'glass text-text-dark hover:bg-glass-bg-strong',
            ]}
            data-category={category.toLowerCase()}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Vehicle Grid -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8" id="vehicle-grid">
        {vehicles.map((vehicle) => (
          <article
            class="glass-strong rounded-2xl overflow-hidden hover:scale-[1.02] transition-transform duration-300"
            data-category={vehicle.category.toLowerCase()}
          >
            <!-- Vehicle Image -->
            <div class="aspect-video bg-glass-bg flex items-center justify-center">
              <div class="text-center p-8">
                <svg class="w-16 h-16 text-text-muted mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
                </svg>
                <span class="text-text-muted text-sm">Vehicle Image</span>
              </div>
            </div>

            <!-- Vehicle Info -->
            <div class="p-6">
              <div class="flex items-center gap-2 mb-2">
                <span class="px-2 py-1 bg-accent-orange/20 text-accent-orange text-xs font-semibold rounded">
                  {vehicle.category}
                </span>
              </div>
              <h3 class="text-xl font-bold text-text-primary mb-2">{vehicle.name}</h3>
              <p class="text-text-muted text-sm mb-4">{vehicle.description}</p>

              <!-- Specs -->
              <div class="flex gap-4 mb-4">
                <div class="flex items-center gap-1">
                  <svg class="w-4 h-4 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                  </svg>
                  <span class="text-text-secondary text-sm">{vehicle.range}</span>
                </div>
                <div class="flex items-center gap-1">
                  <svg class="w-4 h-4 text-sky-light" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />
                  </svg>
                  <span class="text-text-secondary text-sm">
                    {vehicle.payload || vehicle.capacity}
                  </span>
                </div>
              </div>

              <!-- CTA -->
              <a
                href={`${base}contact`}
                class="block w-full py-3 text-center bg-glass-bg text-text-primary font-medium rounded-lg hover:bg-accent-orange hover:text-white transition-colors duration-200"
              >
                Enquire Now
              </a>
            </div>
          </article>
        ))}
      </div>

      <!-- No Results Message -->
      <div id="no-results" class="hidden text-center py-12">
        <p class="text-text-muted text-lg">No vehicles found in this category.</p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-dark-overlay">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
        Need Help Choosing?
      </h2>
      <p class="text-lg text-text-light-muted mb-8">
        Our experts can help you find the perfect vehicle for your needs.
        Get personalized recommendations based on your requirements.
      </p>
      <a
        href={`${base}contact`}
        class="inline-block px-8 py-4 bg-accent-orange text-white font-semibold text-lg rounded-full hover:bg-accent-gold transition-colors duration-200"
      >
        Talk to an Expert
      </a>
    </div>
  </section>
</PageLayout>

<script>
  const buttons = document.querySelectorAll('[data-category]');
  const vehicles = document.querySelectorAll('#vehicle-grid article');
  const noResults = document.getElementById('no-results');

  buttons.forEach((button) => {
    if (button.tagName === 'BUTTON') {
      button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');

        // Update active button
        buttons.forEach((btn) => {
          if (btn.tagName === 'BUTTON') {
            btn.classList.remove('bg-accent-orange');
            btn.classList.add('glass');
          }
        });
        button.classList.remove('glass');
        button.classList.add('bg-accent-orange');

        // Filter vehicles
        let visibleCount = 0;
        vehicles.forEach((vehicle) => {
          const vehicleCategory = vehicle.getAttribute('data-category');
          if (category === 'all' || vehicleCategory === category) {
            vehicle.classList.remove('hidden');
            visibleCount++;
          } else {
            vehicle.classList.add('hidden');
          }
        });

        // Show/hide no results message
        if (noResults) {
          noResults.classList.toggle('hidden', visibleCount > 0);
        }
      });
    }
  });
</script>
