---
import PageLayout from '../../layouts/PageLayout.astro';
const base = import.meta.env.BASE_URL;

const vehicles = [
  {
    id: 'l3-closed-body',
    name: 'L3 Closed Body Loader',
    category: 'L3',
    description: 'Secure transportation for sensitive goods with weather protection',
    spec1: '90-100 km',
    spec1Label: 'Range',
    spec2: 'Lockable',
    spec2Label: 'Security',
    image: '/vehicles/l3-closed-body/s6b-1.jpg',
  },
  {
    id: 'l3-open-body',
    name: 'L3 Open Body Loader',
    category: 'L3',
    description: 'Versatile open cargo platform for diverse loads',
    spec1: '80-100 km',
    spec1Label: 'Range',
    spec2: '500 kg',
    spec2Label: 'Payload',
    image: '/vehicles/l3-open-body/L3-1.jpg',
  },
  {
    id: 'l3-passenger',
    name: 'L3 Passenger Vehicle',
    category: 'L3',
    description: 'E-Rickshaw for urban mobility with 4+1 seating',
    spec1: '4+1',
    spec1Label: 'Seating',
    spec2: '₹500/day',
    spec2Label: 'Earnings',
    image: '/vehicles/l3-passenger/Untitled 6.jpeg',
  },
  {
    id: 'l3-garbage',
    name: 'L3 Garbage Body',
    category: 'L3',
    description: 'Efficient waste collection for cleaner communities',
    spec1: '2.5 m³',
    spec1Label: 'Capacity',
    spec2: '699 kg',
    spec2Label: 'Payload',
    image: '/vehicles/l3-garbage/Untitled.jpeg',
  },
  {
    id: 'l5-closed-body',
    name: 'L5 Closed Body Heavy Duty',
    category: 'L5',
    description: 'Heavy-duty cargo with full weather protection',
    spec1: '100-120 km',
    spec1Label: 'Range',
    spec2: '1000 kg',
    spec2Label: 'Payload',
    image: '/vehicles/l5-closed-body/Untitled 6.jpeg',
  },
  {
    id: 'l5-open-body',
    name: 'L5 Open Body Heavy Duty',
    category: 'L5',
    description: 'Maximum payload capacity for bulk transport',
    spec1: '100-120 km',
    spec1Label: 'Range',
    spec2: '1200 kg',
    spec2Label: 'Payload',
    image: '/vehicles/l5-open-body/Untitled 10.jpeg',
  },
  {
    id: 'l5-passenger-premium',
    name: 'L5 Passenger Premium',
    category: 'L5',
    description: 'Premium comfort for passenger transportation',
    spec1: '6+1',
    spec1Label: 'Seating',
    spec2: 'Premium',
    spec2Label: 'Comfort',
    image: '/vehicles/l5-passenger-premium/photo_2025-05-30_16-00-46.jpg',
  },
  {
    id: 'e-bus',
    name: 'Future E-Bus',
    category: 'E-Bus',
    description: 'Next-generation electric bus for mass transit',
    spec1: '200 km',
    spec1Label: 'Range',
    spec2: '25+',
    spec2Label: 'Passengers',
    image: '/vehicles/future-e-bus/bus1.webp',
    comingSoon: true,
  },
];

const categories = ['All', 'L3', 'L5', 'E-Bus'];
---

<PageLayout title="QTCS Electric Vehicles - Product Range" currentPage={`${base}products`}>
  <section class="py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-12 md:mb-16">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-text-primary mb-6">
          Our <span class="text-accent-orange">Vehicles</span>
        </h1>
        <p class="text-lg md:text-xl text-text-secondary max-w-3xl mx-auto">
          Explore our range of electric vehicles designed for India's diverse
          transportation needs - from cargo delivery to passenger mobility.
        </p>
      </div>

      <!-- Category Filter -->
      <div class="flex flex-wrap justify-center gap-3 mb-12">
        {categories.map((category, index) => (
          <button
            class:list={[
              'px-6 py-2 rounded-full font-medium transition-all duration-200',
              index === 0
                ? 'bg-accent-orange text-white'
                : 'glass text-text-dark hover:bg-glass-bg-strong',
            ]}
            data-category={category.toLowerCase()}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Vehicle Grid -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="vehicle-grid">
        {vehicles.map((vehicle) => (
          <article
            class="glass-strong rounded-2xl overflow-hidden hover:scale-[1.02] transition-transform duration-300"
            data-category={vehicle.category.toLowerCase()}
          >
            <!-- Vehicle Image -->
            <div class="aspect-[4/3] bg-white/5 overflow-hidden">
              <img
                src={`${base}${vehicle.image.slice(1)}`}
                alt={vehicle.name}
                class="w-full h-full object-cover"
              />
            </div>

            <!-- Vehicle Info -->
            <div class="p-5">
              <div class="flex items-center gap-2 mb-2">
                <span class="px-2 py-1 bg-accent-orange/20 text-accent-orange text-xs font-semibold rounded">
                  {vehicle.category}
                </span>
                {vehicle.comingSoon && (
                  <span class="px-2 py-1 bg-trust-blue/20 text-trust-blue text-xs font-semibold rounded">
                    Coming Soon
                  </span>
                )}
              </div>
              <h3 class="text-lg font-bold text-text-primary mb-2 line-clamp-1">{vehicle.name}</h3>
              <p class="text-text-muted text-sm mb-4 line-clamp-2">{vehicle.description}</p>

              <!-- Specs -->
              <div class="flex gap-4 mb-4">
                <div class="flex items-center gap-1">
                  <svg class="w-4 h-4 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                  </svg>
                  <div class="text-xs">
                    <span class="text-text-primary font-semibold">{vehicle.spec1}</span>
                    <span class="text-text-muted ml-1">{vehicle.spec1Label}</span>
                  </div>
                </div>
                <div class="flex items-center gap-1">
                  <svg class="w-4 h-4 text-sky-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />
                  </svg>
                  <div class="text-xs">
                    <span class="text-text-primary font-semibold">{vehicle.spec2}</span>
                    <span class="text-text-muted ml-1">{vehicle.spec2Label}</span>
                  </div>
                </div>
              </div>

              <!-- CTA -->
              <a
                href={`${base}products/${vehicle.id}`}
                class="block w-full py-3 text-center bg-glass-bg text-text-primary font-medium rounded-lg hover:bg-accent-orange hover:text-white transition-colors duration-200"
              >
                View Details
              </a>
            </div>
          </article>
        ))}
      </div>

      <!-- No Results Message -->
      <div id="no-results" class="hidden text-center py-12">
        <p class="text-text-muted text-lg">No vehicles found in this category.</p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-dark-overlay">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
        Need Help Choosing?
      </h2>
      <p class="text-lg text-text-light-muted mb-8">
        Our experts can help you find the perfect vehicle for your needs.
        Get personalized recommendations based on your requirements.
      </p>
      <a
        href={`${base}contact`}
        class="inline-block px-8 py-4 bg-accent-orange text-white font-semibold text-lg rounded-full hover:bg-accent-gold transition-colors duration-200"
      >
        Talk to an Expert
      </a>
    </div>
  </section>
</PageLayout>

<script>
  const buttons = document.querySelectorAll('[data-category]');
  const vehicles = document.querySelectorAll('#vehicle-grid article');
  const noResults = document.getElementById('no-results');

  buttons.forEach((button) => {
    if (button.tagName === 'BUTTON') {
      button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');

        // Update active button
        buttons.forEach((btn) => {
          if (btn.tagName === 'BUTTON') {
            btn.classList.remove('bg-accent-orange', 'text-white');
            btn.classList.add('glass', 'text-text-dark');
          }
        });
        button.classList.remove('glass', 'text-text-dark');
        button.classList.add('bg-accent-orange', 'text-white');

        // Filter vehicles
        let visibleCount = 0;
        vehicles.forEach((vehicle) => {
          const vehicleCategory = vehicle.getAttribute('data-category');
          if (category === 'all' || vehicleCategory === category) {
            vehicle.classList.remove('hidden');
            visibleCount++;
          } else {
            vehicle.classList.add('hidden');
          }
        });

        // Show/hide no results message
        if (noResults) {
          noResults.classList.toggle('hidden', visibleCount > 0);
        }
      });
    }
  });
</script>
